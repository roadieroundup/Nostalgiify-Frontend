import{j as v,r as I}from"./react-4fd50329.js";import{n as m,R as E,C as _,B as R,T as S,L as A,u as F,F as k,D as x,a as D,t as B}from"./antd-c70c59af.js";import{c as O}from"./react-dom-07ff982c.js";import{u as j,a as z,P as V}from"./react-redux-ae24c3af.js";import{u as U,B as M}from"./react-router-dom-09fee1c2.js";import{a as Y}from"./axios-4a70c6fc.js";import{c as G,a as H}from"./@reduxjs-03ba62f6.js";import"./hoist-non-react-statics-23d96a9a.js";import{a as J,b as $,c as P,N as q}from"./react-router-4c7c790a.js";import{G as K}from"./@ant-design-d50c3417.js";import"./classnames-4ba1ba1a.js";import"./rc-util-a7560201.js";import"./react-is-e8e5dbb3.js";import"./@babel-1fba878f.js";import"./rc-resize-observer-72b9b1f8.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-motion-3b190dba.js";import"./rc-picker-0f488324.js";import"./dayjs-118af58c.js";import"./@rc-component-88a1c51a.js";import"./@ctrl-fb5a5473.js";import"./rc-field-form-422a4fc8.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-640b7801.js";import"./compute-scroll-into-view-50f8bc03.js";import"./rc-notification-dee7c7e6.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-pagination-eae9e568.js";import"./rc-tooltip-cd7cc4ba.js";import"./rc-textarea-edeec4ae.js";import"./rc-input-a3d3fe8f.js";import"./scheduler-765c72db.js";import"./use-sync-external-store-5d1b6592.js";import"./@remix-run-7c45f29c.js";import"./immer-41fd5235.js";import"./redux-b3992564.js";import"./redux-thunk-ef899f4c.js";import"./@emotion-c0b5c018.js";import"./stylis-c78c9806.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const p=v.Fragment,t=v.jsx,n=v.jsxs,W=()=>({VITE_API_URL:{VITE_API_URL:"https://nostalgiify-backend-production.up.railway.app/api/",BASE_URL:"/Nostalgiify-Frontend/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}}),{VITE_API_URL:Z}=W(),b=Y.create({baseURL:Z.VITE_API_URL}),N=G({name:"auth",initialState:{loading:!1,user:{},status:"not-logged",activePlaylistId:null},reducers:{onLoading:e=>{e.loading=!0},onClearLoading:e=>{e.loading=!1},onLogin:(e,s)=>{e.user=s.payload,e.status="logged"},onLogout:e=>{e.user={},e.status="not-logged"},onSetActivePlaylistId:(e,s)=>{e.activePlaylistId=s.payload},onClearActivePlaylistId:e=>{e.activePlaylistId=null}}}),{onLoading:L,onClearLoading:w,onLogin:Q,onLogout:X,onSetActivePlaylistId:tt,onClearActivePlaylistId:Qt}=N.actions,et=H({reducer:{auth:N.reducer}}),g=()=>{const{loading:e,user:s,status:a,activePlaylistId:i}=j(c=>c.auth),o=z(),r=J();return{loading:e,user:s,status:a,activePlaylistId:i,startSpotifyLogin:async()=>{o(L());try{await b.get("/nostalgiify/start")}catch(c){console.log(c)}},startCallback:async(c,h)=>{o(L());try{const{data:d}=await b.post("/nostalgiify/callback",{code:c,error:h});o(Q({id:d.id,access_token:d.access_token})),m.success({message:d.message,placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}}),r("/")}catch{m.error({message:"Please authorize Nostalgiify ðŸ˜­",placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}}),r("/")}o(w())},startCreatePlaylist:async({year:c,month:h,day:d})=>{o(L()),m.success({message:"Please wait while we are creating your playlist ðŸŽµ",placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}});try{const{data:u}=await b.post("/nostalgiify/createplaylist",{access_token:s.access_token,user_id:s.id,year:c,month:h,day:d});console.log(u),o(tt(u.id))}catch(u){console.log(u.response.data),m.error({message:"Error creating playlist ðŸ˜­",placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}})}o(w())},startSpotifyLogout:async()=>{o(onChecking()),o(X())}}},{Title:C}=S,{Footer:ot,Content:rt}=A,T=()=>{const{status:e,loading:s,activePlaylistId:a}=g(),i=()=>{window.location.href="https://nostalgiify-backend-production.up.railway.app/api/nostalgiify/start"};return n(p,{children:[n(rt,{children:[t(C,{style:{marginTop:"1rem"},children:"Nostalgiify"}),t(E,{justify:"center",children:t(_,{span:20,children:t(C,{level:4,style:{marginTop:"1rem"},children:"Travel through time with music. Nostalgiify creates personalized playlists featuring the top songs from any date you choose. Rediscover the past and indulge in nostalgic melodies."})})}),e=="logged"?n(p,{children:[t(it,{}),a&&t(nt,{})]}):t(R,{size:"large",type:"primary",icon:t("i",{className:"bi bi-spotify",style:{fontSize:"1rem",color:"#ffff"}}),style:{background:"#1DB954"},onClick:i,loading:s,children:"Login"})]}),n(ot,{className:"glassexp",children:[n(C,{level:5,children:["Made with",t("span",{children:t("img",{className:"pulse",src:"JZLogo.svg",style:{width:"2rem"}})}),"in ðŸ‡¨ðŸ‡·"]}),t(K,{className:"pulse",style:{fontSize:"2rem"},onClick:()=>{window.open("https://github.com/roadieroundup")}})]})]})},st=()=>{const[e]=U(),{startCallback:s,ok:a,message:i}=g(),o=e.get("code");e.get("state");const r=e.get("error");return I.useEffect(()=>{s(o,r)},[]),t(T,{})},{Title:at}=S,it=()=>{const{startCreatePlaylist:e,loading:s}=g(),[a]=F(),i=()=>{try{const r=a.getFieldValue("datePicker").format("YYYY-MM-DD"),l=r.split("-")[0],f=r.split("-")[1],y=r.split("-")[2];console.log(l,f,y),e({year:l,month:f,day:y}),a.resetFields()}catch{m.error({message:"Select a date!",placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}})}},o=r=>r&&r>new Date;return n(p,{children:[t(at,{level:5,children:"Pick a date"}),n(k,{form:a,children:[t(k.Item,{name:"datePicker",children:t(x,{size:"large",disabledDate:o})}),t(R,{size:"large",type:"primary",style:{background:"#1DB954",marginTop:"1rem"},onClick:i,loading:s,children:"Create Playlist!"})]})]})},nt=()=>{const{activePlaylistId:e}=g(),[s,a]=I.useState(!0);return I.useEffect(()=>{const i=setTimeout(()=>{a(!1)},1e3);return()=>clearTimeout(i)},[]),s||!e?null:t("div",{style:{marginTop:"1rem",maxWidth:"90%",display:"flex",justifyContent:"center",marginLeft:"auto",marginRight:"auto"},children:t("iframe",{width:"100%",height:"352",src:`https://open.spotify.com/embed/playlist/${e}?utm_source=generator`,frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"})})},lt=()=>t(p,{children:t(A,{className:"glassexp",style:{minHeight:"100vh",textAlign:"center"},children:n($,{children:[t(P,{path:"/",element:t(T,{})}),t(P,{path:"/callback",element:t(st,{})}),t(P,{path:"/*",element:t(q,{to:"/",replace:!0})})]})})}),ct=({children:e})=>{const{darkAlgorithm:s,compactAlgorithm:a}=B;return t(D,{theme:{token:{fontFamily:"Jost, sans-serif"},algorithm:[s,a]},children:e})},dt=()=>t(V,{store:et,children:t(M,{basename:"Nostalgiify-Frontend",children:t(ct,{children:t(lt,{})})})});O.createRoot(document.getElementById("root")).render(t(dt,{}));
