import{h as ce,k as Me,l as xe,a as be,_ as De,c as me,e as N,f as l,b as T,m as Te,g as Ge}from"./@babel-1fba878f.js";import{c as Je}from"./classnames-4ba1ba1a.js";import{c as Ee,j as Ce,z as te,l as Xe,s as Ye,D as Ze}from"./rc-util-279b5350.js";import{r as u}from"./react-4fd50329.js";var et=["children"],Oe=u.createContext({});function kt(t){var e=t.children,n=ce(t,et);return u.createElement(Oe.Provider,{value:n},e)}var tt=function(t){Me(n,t);var e=xe(n);function n(){return be(this,n),e.apply(this,arguments)}return De(n,[{key:"render",value:function(){return this.props.children}}]),n}(u.Component),I="none",X="appear",Y="enter",Z="leave",ke="none",P="prepare",$="start",z="active",pe="end",Ne="prepared";function Re(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function nt(t,e){var n={animationend:Re("Animation","AnimationEnd"),transitionend:Re("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var rt=nt(Ee(),typeof window<"u"?window:{}),Ue={};if(Ee()){var at=document.createElement("div");Ue=at.style}var ee={};function Ve(t){if(ee[t])return ee[t];var e=rt[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var s=n[i];if(Object.prototype.hasOwnProperty.call(e,s)&&s in Ue)return ee[t]=e[s],ee[t]}return""}var we=Ve("animationend"),Fe=Ve("transitionend"),Ie=!!(we&&Fe),Le=we||"animationend",Pe=Fe||"transitionend";function _e(t,e){if(!t)return null;if(me(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const it=function(t){var e=u.useRef(),n=u.useRef(t);n.current=t;var r=u.useCallback(function(a){n.current(a)},[]);function i(a){a&&(a.removeEventListener(Pe,r),a.removeEventListener(Le,r))}function s(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(Pe,r),a.addEventListener(Le,r),e.current=a)}return u.useEffect(function(){return function(){i(e.current)}},[]),[s,i]};var je=Ee()?u.useLayoutEffect:u.useEffect;const ot=function(){var t=u.useRef(null);function e(){Ce.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=Ce(function(){i<=1?r({isCanceled:function(){return s!==t.current}}):n(r,i-1)});t.current=s}return u.useEffect(function(){return function(){e()}},[]),[n,e]};var ut=[P,$,z,pe],st=[P,Ne],Ke=!1,ct=!0;function Qe(t){return t===z||t===pe}const vt=function(t,e,n){var r=te(ke),i=N(r,2),s=i[0],a=i[1],m=ot(),p=N(m,2),o=p[0],c=p[1];function v(){a(P,!0)}var f=e?st:ut;return je(function(){if(s!==ke&&s!==pe){var d=f.indexOf(s),S=f[d+1],k=n(s);k===Ke?a(S,!0):S&&o(function(_){function C(){_.isCanceled()||a(S,!0)}k===!0?C():Promise.resolve(k).then(C)})}},[t,s]),u.useEffect(function(){return function(){c()}},[]),[v,s]};function ft(t,e,n,r){var i=r.motionEnter,s=i===void 0?!0:i,a=r.motionAppear,m=a===void 0?!0:a,p=r.motionLeave,o=p===void 0?!0:p,c=r.motionDeadline,v=r.motionLeaveImmediately,f=r.onAppearPrepare,d=r.onEnterPrepare,S=r.onLeavePrepare,k=r.onAppearStart,_=r.onEnterStart,C=r.onLeaveStart,O=r.onAppearActive,b=r.onEnterActive,W=r.onLeaveActive,j=r.onAppearEnd,R=r.onEnterEnd,D=r.onLeaveEnd,U=r.onVisibleChanged,ne=te(),K=N(ne,2),L=K[0],V=K[1],A=te(I),w=N(A,2),E=w[0],M=w[1],B=te(null),G=N(B,2),re=G[0],Q=G[1],ae=u.useRef(!1),ie=u.useRef(null);function J(){return n()}var Se=u.useRef(!1);function ye(){M(I,!0),Q(null,!0)}function he(g){var y=J();if(!(g&&!g.deadline&&g.target!==y)){var h=Se.current,x;E===X&&h?x=j==null?void 0:j(y,g):E===Y&&h?x=R==null?void 0:R(y,g):E===Z&&h&&(x=D==null?void 0:D(y,g)),E!==I&&h&&x!==!1&&ye()}}var $e=it(he),ze=N($e,1),We=ze[0],Ae=function(y){var h,x,q;switch(y){case X:return h={},T(h,P,f),T(h,$,k),T(h,z,O),h;case Y:return x={},T(x,P,d),T(x,$,_),T(x,z,b),x;case Z:return q={},T(q,P,S),T(q,$,C),T(q,z,W),q;default:return{}}},H=u.useMemo(function(){return Ae(E)},[E]),He=vt(E,!t,function(g){if(g===P){var y=H[P];return y?y(J()):Ke}if(F in H){var h;Q(((h=H[F])===null||h===void 0?void 0:h.call(H,J(),null))||null)}return F===z&&(We(J()),c>0&&(clearTimeout(ie.current),ie.current=setTimeout(function(){he({deadline:!0})},c))),F===Ne&&ye(),ct}),ge=N(He,2),qe=ge[0],F=ge[1],Be=Qe(F);Se.current=Be,je(function(){V(e);var g=ae.current;ae.current=!0;var y;!g&&e&&m&&(y=X),g&&e&&s&&(y=Y),(g&&!e&&o||!g&&v&&!e&&o)&&(y=Z);var h=Ae(y);y&&(t||h[P])?(M(y),qe()):M(I)},[e]),u.useEffect(function(){(E===X&&!m||E===Y&&!s||E===Z&&!o)&&M(I)},[m,s,o]),u.useEffect(function(){return function(){ae.current=!1,clearTimeout(ie.current)}},[]);var oe=u.useRef(!1);u.useEffect(function(){L&&(oe.current=!0),L!==void 0&&E===I&&((oe.current||L)&&(U==null||U(L)),oe.current=!0)},[L,E]);var ue=re;return H[P]&&F===$&&(ue=l({transition:"none"},ue)),[E,F,ue,L??e]}function lt(t){var e=t;me(t)==="object"&&(e=t.transitionSupport);function n(i,s){return!!(i.motionName&&e&&s!==!1)}var r=u.forwardRef(function(i,s){var a=i.visible,m=a===void 0?!0:a,p=i.removeOnLeave,o=p===void 0?!0:p,c=i.forceRender,v=i.children,f=i.motionName,d=i.leavedClassName,S=i.eventProps,k=u.useContext(Oe),_=k.motion,C=n(i,_),O=u.useRef(),b=u.useRef();function W(){try{return O.current instanceof HTMLElement?O.current:Ze(b.current)}catch{return null}}var j=ft(C,m,W,i),R=N(j,4),D=R[0],U=R[1],ne=R[2],K=R[3],L=u.useRef(K);K&&(L.current=!0);var V=u.useCallback(function(Q){O.current=Q,Xe(s,Q)},[s]),A,w=l(l({},S),{},{visible:m});if(!v)A=null;else if(D===I)K?A=v(l({},w),V):!o&&L.current&&d?A=v(l(l({},w),{},{className:d}),V):c||!o&&!d?A=v(l(l({},w),{},{style:{display:"none"}}),V):A=null;else{var E,M;U===P?M="prepare":Qe(U)?M="active":U===$&&(M="start");var B=_e(f,"".concat(D,"-").concat(M));A=v(l(l({},w),{},{className:Je(_e(f,D),(E={},T(E,B,B&&M),T(E,f,typeof f=="string"),E)),style:ne}),V)}if(u.isValidElement(A)&&Ye(A)){var G=A,re=G.ref;re||(A=u.cloneElement(A,{ref:V}))}return u.createElement(tt,{ref:b},A)});return r.displayName="CSSMotion",r}const dt=lt(Ie);var ve="add",fe="keep",le="remove",se="removed";function mt(t){var e;return t&&me(t)==="object"&&"key"in t?e=t:e={key:t},l(l({},e),{},{key:String(e.key)})}function de(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(mt)}function Et(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=e.length,s=de(t),a=de(e);s.forEach(function(o){for(var c=!1,v=r;v<i;v+=1){var f=a[v];if(f.key===o.key){r<v&&(n=n.concat(a.slice(r,v).map(function(d){return l(l({},d),{},{status:ve})})),r=v),n.push(l(l({},f),{},{status:fe})),r+=1,c=!0;break}}c||n.push(l(l({},o),{},{status:le}))}),r<i&&(n=n.concat(a.slice(r).map(function(o){return l(l({},o),{},{status:ve})})));var m={};n.forEach(function(o){var c=o.key;m[c]=(m[c]||0)+1});var p=Object.keys(m).filter(function(o){return m[o]>1});return p.forEach(function(o){n=n.filter(function(c){var v=c.key,f=c.status;return v!==o||f!==le}),n.forEach(function(c){c.key===o&&(c.status=fe)})}),n}var pt=["component","children","onVisibleChanged","onAllRemoved"],St=["status"],yt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ht(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dt,n=function(r){Me(s,r);var i=xe(s);function s(){var a;be(this,s);for(var m=arguments.length,p=new Array(m),o=0;o<m;o++)p[o]=arguments[o];return a=i.call.apply(i,[this].concat(p)),T(Te(a),"state",{keyEntities:[]}),T(Te(a),"removeKey",function(c){var v=a.state.keyEntities,f=v.map(function(d){return d.key!==c?d:l(l({},d),{},{status:se})});return a.setState({keyEntities:f}),f.filter(function(d){var S=d.status;return S!==se}).length}),a}return De(s,[{key:"render",value:function(){var m=this,p=this.state.keyEntities,o=this.props,c=o.component,v=o.children,f=o.onVisibleChanged,d=o.onAllRemoved,S=ce(o,pt),k=c||u.Fragment,_={};return yt.forEach(function(C){_[C]=S[C],delete S[C]}),delete S.keys,u.createElement(k,S,p.map(function(C){var O=C.status,b=ce(C,St),W=O===ve||O===fe;return u.createElement(e,Ge({},_,{key:b.key,visible:W,eventProps:b,onVisibleChanged:function(R){if(f==null||f(R,{key:b.key}),!R){var D=m.removeKey(b.key);D===0&&d&&d()}}}),v)}))}}],[{key:"getDerivedStateFromProps",value:function(m,p){var o=m.keys,c=p.keyEntities,v=de(o),f=Et(c,v);return{keyEntities:f.filter(function(d){var S=c.find(function(k){var _=k.key;return d.key===_});return!(S&&S.status===se&&d.status===le)})}}}]),s}(u.Component);return T(n,"defaultProps",{component:"div"}),n}const Rt=ht(Ie);export{dt as C,kt as M,Rt as a};
