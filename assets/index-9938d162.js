import{j as L,r as I}from"./react-4fd50329.js";import{n as m,R as x,C as E,B as R,T as S,L as A,u as _,F as w,D,a as F,t as B}from"./antd-267bae2e.js";import{c as j}from"./react-dom-07ff982c.js";import{u as z,a as O,P as V}from"./react-redux-ae24c3af.js";import{u as U,B as M}from"./react-router-dom-09fee1c2.js";import{a as q}from"./axios-4a70c6fc.js";import{c as Y,a as G}from"./@reduxjs-03ba62f6.js";import"./hoist-non-react-statics-23d96a9a.js";import{a as H,b as J,c as b,N as $}from"./react-router-4c7c790a.js";import{G as K,o as W}from"./@ant-design-fc7fae26.js";import"./classnames-4ba1ba1a.js";import"./rc-util-279b5350.js";import"./react-is-e8e5dbb3.js";import"./@babel-1fba878f.js";import"./rc-resize-observer-0d3f300f.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-motion-1fdb2d4f.js";import"./rc-picker-ad419057.js";import"./dayjs-118af58c.js";import"./@rc-component-24b17273.js";import"./@ctrl-fb5a5473.js";import"./rc-field-form-abd08be9.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-640b7801.js";import"./compute-scroll-into-view-50f8bc03.js";import"./rc-notification-fbb7c0ff.js";import"./copy-to-clipboard-64585c8c.js";import"./toggle-selection-93f4ad84.js";import"./rc-pagination-eae9e568.js";import"./rc-tooltip-c1db28d2.js";import"./rc-textarea-ad59c287.js";import"./rc-input-a3d3fe8f.js";import"./scheduler-765c72db.js";import"./use-sync-external-store-5d1b6592.js";import"./@remix-run-7c45f29c.js";import"./immer-41fd5235.js";import"./redux-b3992564.js";import"./redux-thunk-ef899f4c.js";import"./@emotion-c0b5c018.js";import"./stylis-c78c9806.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const g=L.Fragment,t=L.jsx,n=L.jsxs,Z=()=>({VITE_API_URL:{VITE_API_URL:"https://nostalgiify-backend-production.up.railway.app/api/",BASE_URL:"/Nostalgiify-Frontend/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}}),{VITE_API_URL:Q}=Z(),v=q.create({baseURL:Q.VITE_API_URL}),N=Y({name:"auth",initialState:{loading:!1,user:{},status:"not-logged",activePlaylistId:null},reducers:{onLoading:e=>{e.loading=!0},onClearLoading:e=>{e.loading=!1},onLogin:(e,s)=>{e.user=s.payload,e.status="logged"},onLogout:e=>{e.user={},e.status="not-logged"},onSetActivePlaylistId:(e,s)=>{e.activePlaylistId=s.payload},onClearActivePlaylistId:e=>{e.activePlaylistId=null}}}),{onLoading:C,onClearLoading:k,onLogin:X,onLogout:tt,onSetActivePlaylistId:et,onClearActivePlaylistId:ee}=N.actions,ot=G({reducer:{auth:N.reducer}}),f=()=>{const{loading:e,user:s,status:a,activePlaylistId:i}=z(c=>c.auth),o=O(),r=H();return{loading:e,user:s,status:a,activePlaylistId:i,startSpotifyLogin:async()=>{o(C());try{await v.get("/nostalgiify/start")}catch(c){console.log(c)}},startCallback:async(c,P)=>{o(C());try{const{data:d}=await v.post("/nostalgiify/callback",{code:c,error:P});o(X({id:d.id,access_token:d.access_token})),m.success({message:d.message,placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}}),r("/")}catch{m.error({message:"Please authorize Nostalgiify ðŸ˜­",placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}}),r("/")}o(k())},startCreatePlaylist:async({year:c,month:P,day:d})=>{o(C()),m.success({message:"Please wait while we are creating your playlist ðŸŽµ",placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}});try{const{data:p}=await v.post("/nostalgiify/createplaylist",{access_token:s.access_token,user_id:s.id,year:c,month:P,day:d});console.log(p),o(et(p.id))}catch(p){console.log(p.response.data),m.error({message:"Error creating playlist ðŸ˜­",placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}})}o(k())},startSpotifyLogout:async()=>{o(onChecking()),o(tt())}}},{Title:u}=S,{Footer:rt,Content:st}=A,T=()=>{const{status:e,loading:s,activePlaylistId:a}=f(),i=()=>{window.location.href="https://nostalgiify-backend-production.up.railway.app/api/nostalgiify/start"};return n(g,{children:[n(st,{children:[t(u,{style:{marginTop:"1rem"},children:"Nostalgiify"}),t(x,{justify:"center",children:t(E,{span:20,children:t(u,{level:4,style:{marginTop:"1rem"},children:"Travel through time with music. Nostalgiify creates personalized playlists featuring the top songs from any date you choose. Rediscover the past and indulge in nostalgic melodies."})})}),e=="logged"?n(g,{children:[t(nt,{}),a&&t(dt,{})]}):t(R,{size:"large",type:"primary",icon:t("i",{className:"bi bi-spotify",style:{fontSize:"1rem",color:"#ffff"}}),style:{background:"#1DB954"},onClick:i,loading:s,children:"Login"})]}),n(rt,{className:"glassexp",children:[n("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[t(u,{level:5,style:{},children:"Made with"}),t(ct,{className:"pulse",style:{marginTop:"-0.5rem",color:"#ff0000"}}),t(u,{level:5,style:{},children:"in ðŸ‡¨ðŸ‡·"})]}),t(K,{className:"pulse",style:{fontSize:"2rem"},onClick:()=>{window.open("https://github.com/roadieroundup")}})]})]})},at=()=>{const[e]=U(),{startCallback:s,ok:a,message:i}=f(),o=e.get("code");e.get("state");const r=e.get("error");return I.useEffect(()=>{s(o,r)},[]),t(T,{})},{Title:it}=S,nt=()=>{const{startCreatePlaylist:e,loading:s}=f(),[a]=_(),i=()=>{try{const r=a.getFieldValue("datePicker").format("YYYY-MM-DD"),l=r.split("-")[0],y=r.split("-")[1],h=r.split("-")[2];console.log(l,y,h),e({year:l,month:y,day:h}),a.resetFields()}catch{m.error({message:"Select a date!",placement:"bottomRight",closeIcon:null,duration:3,style:{backgroundColor:"#252525",color:"#ffffff"}})}},o=r=>r&&r>new Date;return n(g,{children:[t(it,{level:5,children:"Pick a date"}),n(w,{form:a,children:[t(w.Item,{name:"datePicker",children:t(D,{size:"large",disabledDate:o})}),t(R,{size:"large",type:"primary",style:{background:"#1DB954",marginTop:"1rem"},onClick:i,loading:s,children:"Create Playlist!"})]})]})},lt=()=>n("svg",{version:"1.2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1080 1080",width:"3em",height:"3em",style:{},fill:"currentColor",children:[t("path",{d:"m406.1 788.4q16.8 7.2 36.8 7.2 18.4 0 36-15.2 17.6-16 17.6-53.6v-588.8h96.8v605.6q0 36-11.2 61.6-10.4 25.6-30.4 42.4-20 16.8-47.2 24.8-27.2 7.2-58.4 7.2-24.8 0-48.8-6.4-23.2-7.2-40.8-16.8-17.6-9.6-28-18.4l50.4-69.6q10.4 12 27.2 20z"}),t("path",{d:"m717.1 304.8l3.1 336-290-207.7 1.8 190.4-80 0.7-3.2-344 290 211.7-1.7-186.4z"})]}),ct=e=>t(W,{component:lt,...e}),dt=()=>{const{activePlaylistId:e}=f(),[s,a]=I.useState(!0);return I.useEffect(()=>{const i=setTimeout(()=>{a(!1)},1e3);return()=>clearTimeout(i)},[]),s||!e?null:t("div",{style:{marginTop:"1rem",maxWidth:"90%",display:"flex",justifyContent:"center",marginLeft:"auto",marginRight:"auto"},children:t("iframe",{width:"100%",height:"352",src:`https://open.spotify.com/embed/playlist/${e}?utm_source=generator`,frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"})})},mt=()=>t(g,{children:t(A,{className:"glassexp",style:{minHeight:"100vh",textAlign:"center"},children:n(J,{children:[t(b,{path:"/",element:t(T,{})}),t(b,{path:"/callback",element:t(at,{})}),t(b,{path:"/*",element:t($,{to:"/",replace:!0})})]})})}),pt=({children:e})=>{const{darkAlgorithm:s,compactAlgorithm:a}=B;return t(F,{theme:{token:{fontFamily:"Jost, sans-serif"},algorithm:[s,a]},children:e})},ut=()=>t(V,{store:ot,children:t(M,{basename:"Nostalgiify-Frontend",children:t(pt,{children:t(mt,{})})})});j.createRoot(document.getElementById("root")).render(t(ut,{}));
